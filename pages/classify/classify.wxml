<!--pages/classify/classify.wxml-->

<scroll-view style="height: 100vh;" class="flex-c-fs" scroll-y="true" bindscroll="scroll">

  <!-- banner -->
  <view class='banner-container'>
    <swiper class='banner-wrap'
      indicator-dots="{{swiperInit.dots}}"
      indicator-color="{{swiperInit.dotsColor}}"
      indicator-active-color="{{swiperInit.dotsActiveColor}}"
      autoplay="{{swiperInit.autoplay}}"
      interval="{{swiperInit.interval}}"
      circular="{{swiperInit.circular}}"
      duration="{{swiperInit.duration}}"
    >
      <block wx:for="{{bannerList}}" wx:key="{{index}}">
        <swiper-item class='banner-item'>
          <image mode='aspectFill' src='{{imgUrl+item.adpic}}'></image>
        </swiper-item>
      </block>
    </swiper>
  </view>

  <!-- 占位块 -->
  <view wx:if="{{suck}}" class='placeholder'></view>

  <!-- 筛选 -->
  <view class='flex-r-fs filter-wrap {{fold ? "f-fold" : "f-hidden"}} {{suck ? "suck" : ""}}'>
    <view class="flex-r-fs filter-item-container">
      <view
        wx:for='{{variety}}'
        class='filter-item {{index == varietyIndex ? "active" : ""}}'
        wx:key='{{index}}'
        data-id="{{item.id}}"
        data-index="{{index}}"
        bindtap='chooseVariety'
      >{{item.name}}</view>
    </view>

    <view wx:if='{{variety.length>8}}' class="flex-r-c fold-wrap" bindtap='foldToggle'>
      <image wx:if='{{fold}}' mode="aspectFill" class="fold" src='../../images/fold.png'></image>
      <image wx:if='{{!fold}}' mode="aspectFill" class="fold" src='../../images/unfold.png'></image>
    </view>
  </view>

  <!-- 筛选结果 -->
  <view class='result-wrap'>

    <view
      class='flex-r-sb result-item'
      data-id='{{item.id}}'
      wx:for='{{result}}'
      wx:key='{{index}}'
      bindtap='toDetail'
    >
      <image bindload='loadImage' lazy-load='{{true}}' class='cover' src='{{imgUrl+item.artpic}}'></image>
      <view class='flex-c-sb des-wrap'>
        <view class='flex-c-fs des-top'>
          <view class='title'>{{item.name}}</view>
          <view class='des'>{{item.introduction}}</view>
        </view>
        <view class='flex-r-sb des-bottom'>
          <text class='price'>￥{{item.sell_price}}{{item.spec?'/'+item.spec:''}}</text>

        </view>
      </view>
    </view>
    
  </view>
  
</scroll-view>

